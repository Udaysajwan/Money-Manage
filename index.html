<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Personal Finance Tracker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Base styles optimized for Android */
        :root {
            --primary: #3498db;
            --income: #2ecc71;
            --expense: #e74c3c;
            --savings: #9b59b6;
            --light: #ecf0f1;
            --dark: #34495e;
            --gray: #95a5a6;
            --border: #bdc3c7;
            --shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
            --online-bg: #e8f8f5;
            --offline-bg: #fef9e7;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
        }
        
        body {
            font-family: 'Roboto', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f7fa;
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            padding-bottom: 20px;
            overflow-x: hidden;
            -webkit-text-size-adjust: 100%;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 15px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), #1a5276);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        header h1 {
            font-size: 1.8rem;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        header p {
            font-size: 1rem;
            opacity: 0.9;
            max-width: 90%;
            margin: 0 auto;
        }
        
        .dashboard {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .card {
            background: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: var(--shadow);
            flex: 1 1 calc(50% - 12px);
            min-width: calc(50% - 12px);
            position: relative;
        }
        
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
        }
        
        .balance-card::before { background: var(--primary); }
        .income-card::before { background: var(--income); }
        .expense-card::before { background: var(--expense); }
        .savings-card::before { background: var(--savings); }
        
        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border);
        }
        
        .card-header i {
            font-size: 1.3rem;
            margin-right: 8px;
            padding: 8px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.05);
        }
        
        .card-header h2 {
            font-size: 1.1rem;
            font-weight: 500;
        }
        
        .balance-card .card-header i {
            color: var(--primary);
        }
        
        .income-card .card-header i {
            color: var(--income);
        }
        
        .expense-card .card-header i {
            color: var(--expense);
        }
        
        .savings-card .card-header i {
            color: var(--savings);
        }
        
        .amount {
            font-size: 1.8rem;
            font-weight: 700;
            margin: 8px 0;
        }
        
        .balance-card .amount {
            color: var(--primary);
        }
        
        .income-card .amount {
            color: var(--income);
        }
        
        .expense-card .amount {
            color: var(--expense);
        }
        
        .savings-card .amount {
            color: var(--savings);
        }
        
        .card-footer {
            font-size: 0.8rem;
            color: var(--gray);
            margin-top: 4px;
        }
        
        .section {
            margin-bottom: 25px;
            background: white;
            border-radius: 8px;
            padding: 18px;
            box-shadow: var(--shadow);
        }
        
        .section-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--dark);
            padding-bottom: 8px;
            border-bottom: 2px solid var(--primary);
            display: inline-block;
            font-weight: 600;
        }
        
        .form-container {
            background: #f9fbfd;
            border-radius: 8px;
            padding: 18px;
            margin-bottom: 20px;
            border: 1px solid var(--border);
        }
        
        .form-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 15px;
        }
        
        .form-group {
            margin-bottom: 12px;
            flex: 1 1 100%;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: var(--dark);
            font-size: 0.95rem;
        }
        
        .form-group input, 
        .form-group select, 
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: 5px;
            font-size: 1rem;
            background: white;
            -webkit-appearance: none;
        }
        
        .form-group input:focus, 
        .form-group select:focus, 
        .form-group textarea:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }
        
        .btn {
            padding: 14px 20px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 120px;
            -webkit-appearance: none;
        }
        
        .btn i {
            margin-right: 8px;
        }
        
        .btn-income {
            background: var(--income);
        }
        
        .btn-expense {
            background: var(--expense);
        }
        
        .btn-savings {
            background: var(--savings);
        }
        
        .tabs {
            display: flex;
            margin-bottom: 15px;
            border-bottom: 1px solid var(--border);
            background: #f8fafc;
            border-radius: 6px;
            overflow: hidden;
        }
        
        .tab {
            padding: 12px 15px;
            cursor: pointer;
            font-weight: 600;
            color: var(--gray);
            border-bottom: 3px solid transparent;
            flex: 1;
            text-align: center;
            font-size: 0.95rem;
        }
        
        .tab.active {
            color: var(--primary);
            background: rgba(52, 152, 219, 0.1);
            border-bottom: 3px solid var(--primary);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .table-responsive {
            width: 100%;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            min-width: 600px;
        }
        
        thead {
            background: var(--primary);
            color: white;
        }
        
        th, td {
            padding: 12px;
            text-align: left;
            font-size: 0.9rem;
        }
        
        th {
            font-weight: 600;
            font-size: 0.95rem;
        }
        
        tbody tr {
            border-bottom: 1px solid var(--border);
        }
        
        tbody tr:last-child {
            border-bottom: none;
        }
        
        tbody tr:hover {
            background-color: rgba(52, 152, 219, 0.05);
        }
        
        .income-row {
            border-left: 4px solid var(--income);
        }
        
        .expense-row {
            border-left: 4px solid var(--expense);
        }
        
        .savings-row {
            border-left: 4px solid var(--savings);
        }
        
        .amount-cell {
            font-weight: 600;
        }
        
        .income-row .amount-cell {
            color: var(--income);
        }
        
        .expense-row .amount-cell {
            color: var(--expense);
        }
        
        .savings-row .amount-cell {
            color: var(--savings);
        }
        
        .action-cell button {
            background: none;
            border: none;
            color: var(--gray);
            cursor: pointer;
            padding: 8px;
            font-size: 1.1rem;
        }
        
        #aiTipsSection {
            background: linear-gradient(90deg, #e3f0ff 0%, #f9f6ff 100%);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(52, 152, 219, 0.2);
        }
        
        .ai-tips-content {
            margin-bottom: 12px;
        }
        
        .ai-tips-header {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 6px;
            display: flex;
            align-items: center;
        }
        
        .ai-tips-header i {
            margin-right: 8px;
        }
        
        #aiTipsText {
            font-size: 0.95rem;
            color: var(--dark);
            line-height: 1.5;
        }
        
        .ai-motivation-header {
            font-size: 1rem;
            font-weight: 600;
            color: var(--savings);
            margin-bottom: 5px;
            display: flex;
            align-items: center;
        }
        
        #aiQuoteText {
            font-size: 0.9rem;
            color: var(--dark);
            font-style: italic;
            line-height: 1.5;
        }
        
        .filters {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 15px;
            align-items: center;
        }
        
        .filter-group {
            flex: 1 1 100%;
        }
        
        .filter-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: var(--dark);
            font-size: 0.9rem;
        }
        
        .filter-group input, .filter-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border);
            border-radius: 5px;
            font-size: 0.95rem;
            background: white;
        }
        
        /* Android-specific optimizations */
        input, select, textarea, button {
            font-size: 16px !important;
        }
        
        select {
            background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23333' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 10px center;
            background-size: 12px;
            padding-right: 30px !important;
        }
        
        .empty-state {
            text-align: center;
            padding: 20px;
            color: var(--gray);
        }
        
        .empty-state i {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: #d6dbdf;
        }
        
        .empty-state h3 {
            margin-bottom: 8px;
            color: var(--dark);
            font-size: 1.2rem;
        }
        
        .empty-state p {
            font-size: 0.95rem;
        }
        
        /* Responsive adjustments */
        @media (min-width: 480px) {
            .dashboard .card {
                flex: 1 1 calc(50% - 12px);
                min-width: calc(50% - 12px);
            }
            
            .form-group {
                flex: 1 1 calc(50% - 12px);
            }
            
            .filter-group {
                flex: 1 1 calc(50% - 12px);
            }
        }
        
        @media (min-width: 768px) {
            .container {
                padding: 20px;
            }
            
            header h1 {
                font-size: 2rem;
            }
            
            .dashboard .card {
                flex: 1 1 calc(25% - 12px);
                min-width: calc(25% - 12px);
            }
            
            .form-group {
                flex: 1 1 calc(33.333% - 12px);
            }
            
            .filter-group {
                flex: 0 1 auto;
                min-width: 180px;
            }
            
            .filters {
                flex-wrap: nowrap;
            }
            
            .ai-tips-content, .ai-motivation {
                flex: 1;
            }
        }
        
        @media (max-width: 480px) {
            .card {
                flex: 1 1 100%;
            }
            
            .amount {
                font-size: 1.5rem;
            }
            
            .btn {
                width: 100%;
                margin-bottom: 8px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- AI Tips & Motivation Section -->
        <div id="aiTipsSection">
            <div class="ai-tips-content">
                <div class="ai-tips-header">
                    <i class="fas fa-robot"></i> Smart Money Tips
                </div>
                <div id="aiTipsText">Track your daily expenses to identify spending patterns. Small savings add up significantly over time!</div>
            </div>
            <div class="ai-motivation">
                <div class="ai-motivation-header">
                    <i class="fas fa-quote-left"></i> Daily Motivation
                </div>
                <div id="aiQuoteText">Financial freedom is available to those who learn about it and work for it.</div>
            </div>
        </div>
        
        <header>
            <h1><i class="fas fa-wallet"></i> UDAY Money Management</h1>
            <p>Tracking my income, expenses, and savings in one place</p>
        </header>
        
        <div class="dashboard">
            <div class="card balance-card">
                <div class="card-header">
                    <i class="fas fa-piggy-bank"></i>
                    <h2>Current Balance</h2>
                </div>
                <div class="amount" id="currentBalanceAmount">₹0.00</div>
                <div class="card-footer">Updated just now</div>
            </div>
            <div class="card income-card">
                <div class="card-header">
                    <i class="fas fa-arrow-down"></i>
                    <h2>Total Income</h2>
                </div>
                <div class="amount" id="totalIncomeAmount">₹0.00</div>
                <div style="margin-top: 10px; font-size: 1rem; color: var(--dark);">
                    <div class="income-summary">
                        <strong>Income Breakdown</strong>
                        <div class="online-row" id="onlineIncomeRow"><strong>Online:</strong> ₹0.00</div>
                        <div class="offline-row" id="offlineIncomeRow"><strong>Offline:</strong> ₹0.00</div>
                    </div>
                </div>
                <div class="card-footer">This month</div>
            </div>
            <div class="card expense-card">
                <div class="card-header">
                    <i class="fas fa-arrow-up"></i>
                    <h2>Total Expenses</h2>
                </div>
                <div class="amount" id="totalExpenseAmount">₹0.00</div>
                <div style="margin-top: 10px; font-size: 1rem; color: var(--dark);">
                    <div class="expense-summary">
                        <strong>Expense Breakdown</strong>
                        <div class="online-row" id="onlineExpenseRow"><strong>Online:</strong> ₹0.00</div>
                        <div class="offline-row" id="offlineExpenseRow"><strong>Offline:</strong> ₹0.00</div>
                    </div>
                </div>
                <div class="card-footer">This month</div>
            </div>
            <div class="card savings-card">
                <div class="card-header">
                    <i class="fas fa-lock"></i>
                    <h2>Savings Account</h2>
                </div>
                <div class="amount" id="savingsAmount">₹0.00</div>
                <div class="card-footer">Offline savings</div>
            </div>
        </div>
        
        <div class="section">
            <h2 class="section-title">Add Transaction</h2>
            <div class="tabs">
                <div class="tab active" data-tab="transaction">Income/Expense</div>
                <div class="tab" data-tab="savings">Add to Savings</div>
            </div>
            <div class="form-container">
                <div class="tab-content active" id="transaction-form">
                    <form id="transactionForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="transactionType">Transaction Type</label>
                                <select id="transactionType" required>
                                    <option value="">Select type</option>
                                    <option value="income">Income</option>
                                    <option value="expense">Expense</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="transactionMode">Transaction Mode</label>
                                <select id="transactionMode" required>
                                    <option value="">Select mode</option>
                                    <option value="online">Online</option>
                                    <option value="offline">Offline</option>
                                </select>
                            </div>
                            <div class="form-group" id="expenseCategoryGroup" style="display:none;">
                                <label for="expenseCategory">Expense Category</label>
                                <select id="expenseCategory">
                                    <option value="">Select category</option>
                                    <option value="housing">Housing</option>
                                    <option value="food">Food & Dining</option>
                                    <option value="transport">Transportation</option>
                                    <option value="utilities">Utilities</option>
                                    <option value="health">Health & Fitness</option>
                                    <option value="entertainment">Entertainment</option>
                                    <option value="shopping">Shopping</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="transactionAmount">Amount (₹)</label>
                                <input type="number" id="transactionAmount" step="0.01" min="0" placeholder="0.00" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="transactionDescription">Description</label>
                            <textarea id="transactionDescription" rows="3" placeholder="Add details about this transaction"></textarea>
                        </div>
                        <button type="submit" class="btn btn-income" id="transactionSubmitBtn"><i class="fas fa-plus-circle"></i> Add Transaction</button>
                    </form>
                </div>
                <div class="tab-content" id="savings-form">
                    <form id="savingsForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="savingsAmountInput">Amount (₹)</label>
                                <input type="number" id="savingsAmountInput" step="0.01" min="0" placeholder="0.00" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="savingsDate">Date</label>
                                <input type="date" id="savingsDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="savingsSource">Source</label>
                                <select id="savingsSource">
                                    <option value="cash">Cash Savings</option>
                                    <option value="income">From Income</option>
                                    <option value="gift">Gift</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="savingsDescription">Description</label>
                            <textarea id="savingsDescription" rows="3" placeholder="Add details about this savings deposit"></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-savings"><i class="fas fa-lock"></i> Add to Savings</button>
                    </form>
                </div>
            </div>
        </div>
        
        <div class="section">
            <h2 class="section-title">Recent Transactions</h2>
            <div class="filters">
                <div class="filter-group">
                    <label for="dateFilter">Filter by Date</label>
                    <input type="date" id="dateFilter">
                </div>
                <div class="filter-group">
                    <label for="typeFilter">Filter by Type</label>
                    <select id="typeFilter">
                        <option value="all">All Types</option>
                        <option value="income">Income</option>
                        <option value="expense">Expense</option>
                        <option value="savings">Savings</option>
                    </select>
                </div>
                <button id="clearDateFilter" class="btn" style="margin-top: 22px; padding: 10px 15px;">Clear Filters</button>
            </div>
            <div class="card" id="transactionsCard">
                <div class="table-responsive">
                    <table id="transactionsTable">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Type</th>
                                <th>Category/Source</th>
                                <th>Description</th>
                                <th>Amount</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="transactionsBody">
                            <tr>
                                <td colspan="6" class="empty-state"><i class="fas fa-receipt"></i><h3>No Transactions</h3><p>Add your first transaction to get started</p></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        // On load, set all dashboard values to zero and clear transactions
        document.addEventListener('DOMContentLoaded', function() {
            // --- State ---
            let transactions = [];
            let savings = [];

            // Set dashboard values to zero
            updateDashboard();

            // Set today's date as default for savings form
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('savingsDate').value = today;
            document.getElementById('dateFilter').value = today;

            // Tab switching functionality
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    tab.classList.add('active');
                    const tabId = tab.getAttribute('data-tab');
                    document.getElementById(`${tabId}-form`).classList.add('active');
                });
            });

            // Show/hide source/category based on transaction type
            const transactionType = document.getElementById('transactionType');
            const expenseCategoryGroup = document.getElementById('expenseCategoryGroup');
            transactionType.addEventListener('change', function() {
                if (this.value === 'income') {
                    expenseCategoryGroup.style.display = 'none';
                } else if (this.value === 'expense') {
                    expenseCategoryGroup.style.display = '';
                } else {
                    expenseCategoryGroup.style.display = 'none';
                }
            });

            // Filter functionality
            const dateFilter = document.getElementById('dateFilter');
            const typeFilter = document.getElementById('typeFilter');
            const clearFilterBtn = document.getElementById('clearDateFilter');

            clearFilterBtn.addEventListener('click', function() {
                dateFilter.value = '';
                typeFilter.value = 'all';
                renderTransactions();
            });

            dateFilter.addEventListener('change', renderTransactions);
            typeFilter.addEventListener('change', renderTransactions);

            // Form submission handlers
            document.getElementById('transactionForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const type = document.getElementById('transactionType').value;
                const mode = document.getElementById('transactionMode').value;
                const category = document.getElementById('expenseCategory').value;
                const amount = parseFloat(document.getElementById('transactionAmount').value) || 0;
                const description = document.getElementById('transactionDescription').value.trim();
                const date = today + ' ' + new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                if (!type || !mode || amount <= 0) {
                    alert('Please fill all required fields.');
                    return;
                }
                transactions.push({
                    date,
                    type,
                    mode,
                    category: type === 'expense' ? category : (type === 'income' ? 'Salary' : ''),
                    description,
                    amount
                });
                this.reset();
                updateDashboard();
                renderTransactions();
            });

            document.getElementById('savingsForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const amount = parseFloat(document.getElementById('savingsAmountInput').value) || 0;
                const date = document.getElementById('savingsDate').value + ' ' + new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                const source = document.getElementById('savingsSource').value;
                const description = document.getElementById('savingsDescription').value.trim();
                if (amount <= 0) {
                    alert('Please enter a valid savings amount.');
                    return;
                }
                savings.push({
                    date,
                    type: 'savings',
                    source,
                    description,
                    amount
                });
                this.reset();
                document.getElementById('savingsDate').value = today;
                updateDashboard();
                renderTransactions();
            });

            // Prevent zooming on input focus
            document.querySelectorAll('input, select, textarea').forEach(el => {
                el.addEventListener('focus', function() {
                    document.body.style.zoom = "100%";
                });
            });

            // Initial render
            renderTransactions();

            // --- Functions ---
            function updateDashboard() {
                let income = 0, expense = 0, savingsTotal = 0;
                let onlineIncome = 0, offlineIncome = 0, onlineExpense = 0, offlineExpense = 0;
                transactions.forEach(t => {
                    if (t.type === 'income') {
                        income += t.amount;
                        if (t.mode === 'online') onlineIncome += t.amount;
                        else offlineIncome += t.amount;
                    } else if (t.type === 'expense') {
                        expense += t.amount;
                        if (t.mode === 'online') onlineExpense += t.amount;
                        else offlineExpense += t.amount;
                    }
                });
                savingsTotal = savings.reduce((sum, s) => sum + s.amount, 0);
                const balance = income - expense;
                document.getElementById('currentBalanceAmount').textContent = '₹' + balance.toFixed(2);
                document.getElementById('totalIncomeAmount').textContent = '₹' + income.toFixed(2);
                document.getElementById('totalExpenseAmount').textContent = '₹' + expense.toFixed(2);
                document.getElementById('savingsAmount').textContent = '₹' + savingsTotal.toFixed(2);
                document.getElementById('onlineIncomeRow').innerHTML = '<strong>Online:</strong> ₹' + onlineIncome.toFixed(2);
                document.getElementById('offlineIncomeRow').innerHTML = '<strong>Offline:</strong> ₹' + offlineIncome.toFixed(2);
                document.getElementById('onlineExpenseRow').innerHTML = '<strong>Online:</strong> ₹' + onlineExpense.toFixed(2);
                document.getElementById('offlineExpenseRow').innerHTML = '<strong>Offline:</strong> ₹' + offlineExpense.toFixed(2);
            }

            function renderTransactions() {
                const tbody = document.getElementById('transactionsBody');
                tbody.innerHTML = '';
                // Merge transactions and savings for display
                let all = transactions.map(t => ({...t, displayType: t.type, displayCategory: t.type === 'expense' ? t.category : (t.type === 'income' ? 'Salary' : '')}))
                    .concat(savings.map(s => ({
                        date: s.date,
                        displayType: 'Savings',
                        displayCategory: s.source.charAt(0).toUpperCase() + s.source.slice(1) + ' Savings',
                        description: s.description,
                        amount: s.amount
                    })));
                // Apply filters
                const selectedDate = dateFilter.value;
                const selectedType = typeFilter.value;
                if (selectedDate) {
                    all = all.filter(t => t.date.split(' ')[0] === selectedDate);
                }
                if (selectedType && selectedType !== 'all') {
                    all = all.filter(t => t.displayType.toLowerCase() === selectedType);
                }
                if (all.length === 0) {
                    tbody.innerHTML = '<tr><td colspan="6" class="empty-state"><i class="fas fa-receipt"></i><h3>No Transactions</h3><p>Add your first transaction to get started</p></td></tr>';
                    return;
                }
                all.forEach((t, idx) => {
                    const row = document.createElement('tr');
                    row.className = (t.displayType === 'income' ? 'income-row' : (t.displayType === 'expense' ? 'expense-row' : (t.displayType === 'Savings' ? 'savings-row' : '')));
                    row.innerHTML = `
                        <td>${t.date}</td>
                        <td>${capitalize(t.displayType)}</td>
                        <td>${t.displayCategory || ''}</td>
                        <td>${t.description || ''}</td>
                        <td class="amount-cell">₹${t.amount.toFixed(2)}</td>
                        <td class="action-cell"><button title="Delete" data-idx="${idx}"><i class="fas fa-trash"></i></button></td>
                    `;
                    tbody.appendChild(row);
                });
                // Add delete listeners
                tbody.querySelectorAll('.action-cell button').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const idx = parseInt(this.getAttribute('data-idx'));
                        // Figure out if it's a transaction or savings
                        if (idx < transactions.length) {
                            transactions.splice(idx, 1);
                        } else {
                            savings.splice(idx - transactions.length, 1);
                        }
                        updateDashboard();
                        renderTransactions();
                    });
                });
            }

            function capitalize(str) {
                return str.charAt(0).toUpperCase() + str.slice(1);
            }
        });
        
        function updateAITips() {
            const tips = [
                "Track your daily expenses to identify spending patterns. Small savings add up significantly over time!",
                "Consider automating your savings. Set up automatic transfers to your savings account on payday.",
                "Review your subscriptions monthly. Cancel services you don't use regularly.",
                "Create a budget for variable expenses like dining out and entertainment to avoid overspending.",
                "Build an emergency fund that can cover 3-6 months of living expenses.",
                "Use cash for discretionary spending to help stay within your budget limits.",
                "Compare prices before making significant purchases. A little research can lead to big savings.",
                "Set specific financial goals - they're easier to achieve when clearly defined."
            ];
            
            const quotes = [
                "Financial freedom is available to those who learn about it and work for it.",
                "It's not how much money you make, but how much money you keep, how hard it works for you, and how many generations you keep it for.",
                "Every rupee you save is a step closer to financial independence.",
                "Saving is a great habit but investing is what creates wealth.",
                "The habit of saving is itself an education; it fosters every virtue, teaches self-denial, cultivates the sense of order, trains to forethought, and so broadens the mind.",
                "Do not save what is left after spending, but spend what is left after saving.",
                "Wealth is not about having a lot of money; it's about having a lot of options.",
                "Financial peace isn't the acquisition of stuff. It's learning to live on less than you make."
            ];
            
            const randomTip = tips[Math.floor(Math.random() * tips.length)];
            const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
            
            document.getElementById('aiTipsText').textContent = randomTip;
            document.getElementById('aiQuoteText').textContent = randomQuote;
        }
    </script>
</body>
</html>
